<html> <title>Convo IRL</title> <head> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"> </head> <body> <canvas id="game"></canvas> <style>body,html{background-color:#96c083;margin:0;padding:0}#game,body,html{height:100%;width:100%}#game{-ms-interpolation-mode:nearest-neighbor;image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-o-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:optimize-contrast;image-rendering:crisp-edges;image-rendering:pixelated;z-index:2}#game-background{z-index:1}</style> <script>parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"5ywg":[function(require,module,exports) {
"use strict";var t;exports.__esModule=!0,function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(t=exports.Direction||(exports.Direction={})),exports.TILE_SIZE=8,exports.HALF_TILE_SIZE=exports.TILE_SIZE/2,exports.SQUARE_SIZE=5,exports.MS_PER_UPDATE=1/60;
},{}],"eAYL":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var n=require("./common");function t(n,t,e){r(n,t,e)&&(n.pos=t)}function r(t,r,e){var o=r.x>=0&&r.x<=e.size.width-t.size.width&&r.y>=0&&r.y<e.size.height,i=r.x,a=r.y;i/=n.TILE_SIZE,a/=n.TILE_SIZE;var u=e.tilesGrid[a][i].walkable;return o&&u}function e(n,t){if(n.running)return!1;var r=t-n.startTime>n.minTimeDelta,e=n.percentChance>Math.random();return r&&e}function o(n,t,r){return(1-r)*n+r*t}function i(n,t,r){return Math.max(Math.min(n,r),t)}function a(n,t,r,e,a){return i(o(n,t,a),r,e)}function u(){return 2*Math.round(Math.random())-1}function s(n){return[].concat.apply([],n)}function c(n){return n[Math.floor(Math.random()*n.length)]}function h(n,t,r,e){void 0===e&&(e=!1);var o=r,i=t;return e&&(o=t,i=r),n>=.5?a(o,i,t,r,(n-.5)/.5):a(i,o,t,r,n/.5)}exports.moveThingToPositionIfPossible=t,exports.canThingMoveToPosition=r,exports.shouldDoAnimation=e,exports.lerp=o,exports.clerp=a,exports.oneOrMinusOne=u,exports.flatten=s,exports.randomElementFromArray=c,exports.twoPhaseClerp=h;
},{"./common":"5ywg"}],"LnVe":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var s=require("./helpers"),i=.9,e=10,t=.01,h=function(){function h(s){this.pos={x:0,y:0},this.size={width:0,height:0},this.game=s,this.player=s.player,this.size={width:s.canvas.width,height:s.canvas.height},this.shake={amplitude:0,dir:{x:1,y:1},pos:{x:0,y:0}}}return Object.defineProperty(h.prototype,"offset",{get:function(){return{x:this.shake.pos.x+this.pos.x,y:this.shake.pos.y+this.pos.y}},enumerable:!0,configurable:!0}),h.prototype.move=function(s){if(this.pos.x=this.game.canvas.width/2-s.pos.x*this.game.squareSize-s.drawingSize.width/2,this.pos.y=this.game.canvas.height/2-s.pos.y*this.game.squareSize-s.drawingSize.height/2,!this.game.transitioning){var i=-1*(this.game.currentLevel.drawingSize.width-this.size.width),e=-1*(this.game.currentLevel.drawingSize.height-this.size.height);this.pos.x>0&&(this.pos.x=0),this.pos.x<i&&(this.pos.x=i),this.pos.y>0&&(this.pos.y=0),this.pos.y<e&&(this.pos.y=e)}},h.prototype.shakeScreen=function(){this.shake.pos={x:0,y:0},this.shake.amplitude=e*this.game.squareSize,this.shake.dir.x=s.oneOrMinusOne(),this.shake.dir.y=s.oneOrMinusOne()},h.prototype.updateScreenShake=function(s){this.shake.amplitude*=i;var e=this.shake,h=e.amplitude,a=e.dir;Math.abs(h)<=t?(this.shake.pos.x=0,this.shake.pos.y=0):(this.shake.pos.x=Math.sin(s/50)*h*a.x,this.shake.pos.y=Math.sin(s/50)*h*a.y)},h}();exports.default=h;
},{"./helpers":"eAYL"}],"oinf":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var n={duration:300,minTimeDelta:3e3,openness:1,percentChance:.5,running:!1,startTime:0};exports.blinking=n;var e={duration:0,minTimeDelta:1e3,offset:0,percentChance:.008,running:!1,startTime:0};exports.lookAway=e;var t={duration:200,endPos:{x:0,y:0},running:!1,startTime:0};exports.walking=t;var r={duration:1500,running:!1,startTime:0};exports.transition=r;
},{}],"pM81":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e=require("../common"),i=require("../helpers"),t=function(){function t(e){this.game=e}return t.prototype.update=function(){this.drawingSize.width=this.size.width*this.game.squareSize,this.drawingSize.height=this.size.height*this.game.squareSize},t.prototype.generateTiles=function(){var t=this,s=this.tileIndexes[0].length*e.TILE_SIZE,h=this.tileIndexes.length*e.TILE_SIZE;this.size={width:s,height:h},this.drawingSize={width:s*this.game.squareSize,height:h*this.game.squareSize},this.tilesGrid=this.tileIndexes.map(function(e,i){return e.map(function(e,s){return new t.tileTypeMap[e](t.game,s,i)})}),this.tiles=i.flatten(this.tilesGrid)},t}();exports.default=t;
},{"../common":"5ywg","../helpers":"eAYL"}],"1p/C":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e=require("../common"),s={grass:{squareSize:e.SQUARE_SIZE,canvas:null},green:{squareSize:e.SQUARE_SIZE,canvas:null},flowers:{squareSize:e.SQUARE_SIZE,canvas:null},tree:{squareSize:e.SQUARE_SIZE,canvas:null}};exports.default=s;
},{"../common":"5ywg"}],"uUjA":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};exports.__esModule=!0;var t=e(require("./tile-cache")),i=require("../common"),a=require("../helpers"),r=function(){function e(e,t,a){this.drawingSize={width:i.TILE_SIZE,height:i.TILE_SIZE},this.pos={x:0,y:0},this.size={width:i.TILE_SIZE,height:i.TILE_SIZE},this.walkable=!0,this.visible=!0,this.game=e,this.pos={x:t*i.TILE_SIZE,y:a*i.TILE_SIZE},this.drawingSize={width:i.TILE_SIZE*this.game.squareSize,height:i.TILE_SIZE*this.game.squareSize}}return Object.defineProperty(e.prototype,"offscreenCanvas",{get:function(){return t.default[this.name].canvas},enumerable:!0,configurable:!0}),e.prototype.draw=function(e){e.drawImage(this.offscreenCanvas,0,0)},e.prototype.resize=function(){},e.prototype.update=function(){t.default[this.name].squareSize!==this.game.squareSize&&(this.drawingSize.width=i.TILE_SIZE*this.game.squareSize,this.drawingSize.height=i.TILE_SIZE*this.game.squareSize,this.cacheOffscreenContext())},e.prototype.cacheOffscreenContext=function(){var e=this,r=document.createElement("canvas");r.width=this.drawingSize.width,r.height=this.drawingSize.height;var s=r.getContext("2d");a.flatten(this.colorMatrix).map(function(t){return e.colorMap[t]}).forEach(function(t,a){s.fillStyle=t;var r=e.game.squareSize*(a%i.TILE_SIZE),n=e.game.squareSize*Math.floor(a/i.TILE_SIZE);s.fillRect(r,n,e.game.squareSize,e.game.squareSize)}),t.default[this.name].squareSize=this.game.squareSize,t.default[this.name].canvas=r},e}();exports.default=r;
},{"./tile-cache":"1p/C","../common":"5ywg","../helpers":"eAYL"}],"A1jt":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};exports.__esModule=!0;var r=e(require("./tile")),o=function(e){function r(t,r,o){var n=e.call(this,t,r,o)||this;return n.name="flowers",n.colorMap=["#96c083","#5fa367","#eeeec7","#dec26d"],n.colorMatrix=[[0,0,0,0,0,0,0,0],[0,0,3,0,0,0,1,0],[0,3,2,3,0,0,0,0],[0,0,3,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0]],n.cacheOffscreenContext(),n}return t(r,e),r}(r.default);exports.default=o;
},{"./tile":"uUjA"}],"Y022":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};exports.__esModule=!0;var e=r(require("./tile")),o=function(r){function e(t,e,o){var n=r.call(this,t,e,o)||this;return n.name="grass",n.colorMap=["#96c083","#5fa367"],n.colorMatrix=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0]],n.cacheOffscreenContext(),n}return t(e,r),e}(e.default);exports.default=o;
},{"./tile":"uUjA"}],"978g":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};exports.__esModule=!0;var r=e(require("./tile")),o=function(e){function r(t,r,o){var n=e.call(this,t,r,o)||this;return n.name="green",n.colorMap=["#96c083","#ff00ff"],n.colorMatrix=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],n.cacheOffscreenContext(),n}return t(r,e),r}(r.default);exports.default=o;
},{"./tile":"uUjA"}],"liEn":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};exports.__esModule=!0;var r=e(require("./tile")),o=function(e){function r(t,r,o){var n=e.call(this,t,r,o)||this;return n.name="tree",n.walkable=!1,n.colorMap=["#96c083","#6e4c49","#3e625e"],n.colorMatrix=[[0,0,0,0,0,0,0,0],[0,0,2,2,2,2,0,0],[0,2,2,2,2,2,2,0],[0,2,2,2,2,2,2,0],[0,0,2,2,2,2,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,1,1,1,1,0,0]],n.cacheOffscreenContext(),n}return t(r,e),r}(r.default);exports.default=o;
},{"./tile":"uUjA"}],"VVJ9":[function(require,module,exports) {
"use strict";exports.__esModule=!0,exports.default={A:[[,1],[1,,1],[1,,1],[1,1,1],[1,,1]],B:[[1,1],[1,,1],[1,1,1],[1,,1],[1,1]],C:[[1,1,1],[1],[1],[1],[1,1,1]],D:[[1,1],[1,,1],[1,,1],[1,,1],[1,1]],E:[[1,1,1],[1],[1,1,1],[1],[1,1,1]],F:[[1,1,1],[1],[1,1],[1],[1]],G:[[,1,1],[1],[1,,1,1],[1,,,1],[,1,1]],H:[[1,,1],[1,,1],[1,1,1],[1,,1],[1,,1]],I:[[1,1,1],[,1],[,1],[,1],[1,1,1]],J:[[1,1,1],[,,1],[,,1],[1,,1],[1,1,1]],K:[[1,,,1],[1,,1],[1,1],[1,,1],[1,,,1]],L:[[1],[1],[1],[1],[1,1,1]],M:[[1,1,1,1,1],[1,,1,,1],[1,,1,,1],[1,,,,1],[1,,,,1]],N:[[1,,,1],[1,1,,1],[1,,1,1],[1,,,1],[1,,,1]],O:[[1,1,1],[1,,1],[1,,1],[1,,1],[1,1,1]],P:[[1,1,1],[1,,1],[1,1,1],[1],[1]],Q:[[0,1,1],[1,,,1],[1,,,1],[1,,1,1],[1,1,1,1]],R:[[1,1],[1,,1],[1,,1],[1,1],[1,,1]],S:[[1,1,1],[1],[1,1,1],[,,1],[1,1,1]],T:[[1,1,1],[,1],[,1],[,1],[,1]],U:[[1,,1],[1,,1],[1,,1],[1,,1],[1,1,1]],V:[[1,,,,1],[1,,,,1],[,1,,1],[,1,,1],[,,1]],W:[[1,,,,1],[1,,,,1],[1,,,,1],[1,,1,,1],[1,1,1,1,1]],X:[[1,,,,1],[,1,,1],[,,1],[,1,,1],[1,,,,1]],Y:[[1,,1],[1,,1],[,1],[,1],[,1]],Z:[[1,1,1,1,1],[,,,1],[,,1],[,1],[1,1,1,1,1]],0:[[1,1,1],[1,,1],[1,,1],[1,,1],[1,1,1]],1:[[,1],[,1],[,1],[,1],[,1]],2:[[1,1,1],[0,0,1],[1,1,1],[1,0,0],[1,1,1]],3:[[1,1,1],[0,0,1],[1,1,1],[0,0,1],[1,1,1]],4:[[1,0,1],[1,0,1],[1,1,1],[0,0,1],[0,0,1]],5:[[1,1,1],[1,0,0],[1,1,1],[0,0,1],[1,1,1]],6:[[1,1,1],[1,0,0],[1,1,1],[1,0,1],[1,1,1]],7:[[1,1,1],[0,0,1],[0,0,1],[0,0,1],[0,0,1]],8:[[1,1,1],[1,0,1],[1,1,1],[1,0,1],[1,1,1]],9:[[1,1,1],[1,0,1],[1,1,1],[0,0,1],[1,1,1]]," ":[[,],[,],[,],[,],[,]]};
},{}],"27c9":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};exports.__esModule=!0;var t=e(require("./letters")),i=require("./common"),s=function(){function e(e,i,s,r){void 0===s&&(s="#ffffff"),void 0===r&&(r={x:0,y:0}),this.words="",this.visible=!0,this.game=e,this.words=i.toUpperCase(),this.color=s,this.pos=r,this.pixelLetters=this.words.split("").map(function(e){return t.default[e]}),this.updateSize(),this.drawingSize={height:this.size.height*this.game.squareSize,width:this.size.width*this.game.squareSize}}return e.prototype.draw=function(e){var t=this;e.fillStyle=this.color;var i=this.pos.x;this.pixelLetters.forEach(function(s){for(var r=t.pos.y,h=0,a=0;a<s.length;a++){for(var o=s[a],u=0;u<o.length;u++)o[u]&&e.fillRect(i+u*t.game.squareSize,r,t.game.squareSize,t.game.squareSize);h=Math.max(h,o.length*t.game.squareSize),r=t.game.squareSize*(a+1)+t.pos.y}i+=t.game.squareSize+h})},e.prototype.resize=function(){this.drawingSize.width=this.size.width*this.game.squareSize,this.drawingSize.height=this.size.height*this.game.squareSize},e.prototype.update=function(){},e.prototype.updateSize=function(){var e=this.pixelLetters.map(function(e){return Math.max.apply(Math,e.map(function(e){return e.length}))}).reduce(function(e,t){return e+t},0)+this.pixelLetters.length-1;this.size={width:e,height:i.SQUARE_SIZE}},e}();exports.default=s;
},{"./letters":"VVJ9","./common":"5ywg"}],"Wql6":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};exports.__esModule=!0;var r=t(require("./level")),i=t(require("../tiles/flowers")),n=t(require("../tiles/grass")),a=t(require("../tiles/green")),s=t(require("../tiles/tree")),o=t(require("../text")),u="CONVO IRL",l="TAP TO PLAY",f=function(t){function r(e){var r=t.call(this,e)||this;return r.tileTypeMap=[a.default,i.default,n.default,s.default],r.tileIndexes=[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[3,0,2,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3],[3,0,0,0,1,0,0,0,0,2,0,0,0,0,0,0,0,0,0,3],[3,0,0,0,0,1,0,0,0,0,0,0,0,2,0,0,0,2,0,3],[3,0,0,0,2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,3],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[3,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,3],[3,0,0,0,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,3],[3,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,1,0,3],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[3,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[3,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[3,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,3],[3,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,3],[3,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,3],[3,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,3],[3,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]],r.generateTiles(),r}return e(r,t),r.prototype.configureDrawables=function(){this.game.addDrawables(this.tiles,0),this.resize()},r.prototype.resize=function(){this.addText()},r.prototype.handleInput=function(){this.game.transitioning||this.game.queueNextLevel(this.game.levels.world)},r.prototype.addText=function(){var e={x:55,y:50},t={x:e.x+.4,y:e.y+.4},r={x:53,y:70},i={x:r.x+.4,y:r.y+.4},n=new o.default(this.game,u,"#FFFFFF",e),a=new o.default(this.game,u,"#000000",t),s=new o.default(this.game,l,"#FFFFFF",r),f=new o.default(this.game,l,"#000000",i);this.game.addDrawables([a,f,n,s],1)},r}(r.default);exports.default=f;
},{"./level":"pM81","../tiles/flowers":"A1jt","../tiles/grass":"Y022","../tiles/green":"978g","../tiles/tree":"liEn","../text":"27c9"}],"VO2B":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};exports.__esModule=!0;var i=t(require("./text")),e=require("./common"),s=.2,h=500,r=function(){function t(t,e){this.visible=!0,this.percentFull=.6,this.lastBlinkAt=0,this.game=t,this.pos=e,this.energyText=new i.default(this.game,"ENERGY","#3e625e",{x:this.pos.x,y:this.pos.y}),this.size=Object.assign({},this.energyText.size),this.drawingSize=Object.assign({},this.energyText.drawingSize)}return t.prototype.move=function(t){this.pos.x=t.x,this.pos.y=t.y,this.energyText.pos.x=t.x+e.SQUARE_SIZE,this.energyText.pos.y=t.y+e.SQUARE_SIZE},t.prototype.resize=function(){this.drawingSize.width=(this.size.width+2)*this.game.squareSize,this.drawingSize.height=(this.size.height+2)*this.game.squareSize},t.prototype.draw=function(t){t.strokeStyle="#ffffff",t.fillStyle="#ffffff",t.lineWidth=e.SQUARE_SIZE,t.fillRect(this.pos.x,this.pos.y,this.drawingSize.width*this.percentFull,this.drawingSize.height),t.strokeRect(this.pos.x,this.pos.y,this.drawingSize.width,this.drawingSize.height),this.energyText.draw(t)},t.prototype.update=function(t){this.percentFull>s?this.visible=!0:t-this.lastBlinkAt>h&&(this.visible=!this.visible,this.lastBlinkAt=t)},t}();exports.default=r;
},{"./text":"27c9","./common":"5ywg"}],"GyKP":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};exports.__esModule=!0;var r=t(require("./level")),a=t(require("../tiles/flowers")),i=t(require("../tiles/grass")),s=t(require("../tiles/green")),o=t(require("../tiles/tree")),n=t(require("../energy-bar")),l=require("../common"),u=function(t){function r(e){var r=t.call(this,e)||this;return r.tileTypeMap=[s.default,a.default,i.default,o.default],r.tileIndexes=[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[3,0,2,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3],[3,0,0,0,1,0,0,0,0,2,0,0,0,0,0,0,0,0,0,3],[3,0,0,0,0,1,0,0,0,0,0,0,0,2,0,0,0,2,0,3],[3,0,0,0,2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,3],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[3,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,3],[3,0,0,0,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,3],[3,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,1,0,3],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[3,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[3,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[3,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,3],[3,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,3],[3,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,3],[3,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,3],[3,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]],r.generateTiles(),r.energyBar=new n.default(r.game,{x:0,y:l.SQUARE_SIZE}),r}return e(r,t),r.prototype.handleInput=function(e){switch(e){case"ArrowUp":this.game.walk(l.Direction.Up);break;case"ArrowDown":this.game.walk(l.Direction.Down);break;case"ArrowRight":this.game.walk(l.Direction.Right);break;case"ArrowLeft":this.game.walk(l.Direction.Left)}},r.prototype.resize=function(){var e=Math.floor((this.game.canvas.width-this.energyBar.drawingSize.width)/2);this.energyBar.move({x:e,y:this.energyBar.pos.y})},r.prototype.configureDrawables=function(){this.game.addDrawables(this.tiles,0),this.game.addDrawables(this.game.player.dusts,1),this.game.addDrawables([this.game.player],1),this.game.addOverlayDrawables([this.energyBar])},r}(r.default);exports.default=u;
},{"./level":"pM81","../tiles/flowers":"A1jt","../tiles/grass":"Y022","../tiles/green":"978g","../tiles/tree":"liEn","../energy-bar":"VO2B","../common":"5ywg"}],"UQVz":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var i=require("./helpers"),t=750,e=1,s=3,h=.3,r=function(){function r(i){this.size={width:1,height:1},this.pos={x:0,y:0},this.color="#ffffff",this.visible=!1,this.percentGrown=0,this.game=i,this.drawingSize={height:this.size.height*this.game.squareSize,width:this.size.width*this.game.squareSize}}return r.prototype.reJuice=function(i,t,e){this.pos.x=t,this.pos.y=e,this.percentGrown=0,this.startTime=i,this.visible=!0},r.prototype.resize=function(){},r.prototype.update=function(i){this.visible&&(this.drawingSize.width=this.size.width*this.game.squareSize,this.drawingSize.height=this.size.height*this.game.squareSize,this.percentGrown=(i-this.startTime)/t,this.visible=!(this.percentGrown>=1))},r.prototype.draw=function(t,r){var n=i.clerp(e,s,e,s,this.percentGrown),o=i.clerp(h,0,0,h,this.percentGrown);t.globalAlpha=o,t.fillStyle=this.color,t.fillRect(-this.drawingSize.width*n/2,-this.drawingSize.height*n/2,this.drawingSize.width*n,this.drawingSize.height*n),t.globalAlpha=1},r}();exports.default=r;
},{"./helpers":"eAYL"}],"2rXh":[function(require,module,exports) {
"use strict";var i=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};exports.__esModule=!0;var t=i(require("./dust")),n=require("./helpers"),e=require("./common"),s=require("./animations"),a=2,o=1,r="rgb(255, 255, 255)",h="rgb(0, 0, 0)",g=4,l=1,u=100,m=["#94725d","#bfa17a","#eeeec7","#5a444e","#cd9957","#3e2d2e"],d=function(){function i(i){var a=this;this.drawingSize={width:e.TILE_SIZE,height:e.TILE_SIZE},this.pos={x:80,y:80},this.size={width:e.TILE_SIZE,height:e.TILE_SIZE},this.visible=!0,this.animations={},this.rot=0,this.game=i,this.animations.blinking=Object.assign({},s.blinking),this.animations.walking=Object.assign({},s.walking,{endPos:this.pos}),this.animations.lookAway=Object.assign({},s.lookAway),this.color=n.randomElementFromArray(m),this.dusts=Array.from(Array(u).keys()).map(function(){return new t.default(a.game)})}return Object.defineProperty(i.prototype,"blinking",{get:function(){return this.animations.blinking.running},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"walking",{get:function(){return this.animations.walking.running},enumerable:!0,configurable:!0}),i.prototype.walk=function(i){if(!(this.game.timestamp<this.animations.walking.startTime+this.animations.walking.duration)){var t=this.animations.walking.endPos,s=t.x,a=t.y;i===e.Direction.Left?(this.rot=-Math.PI/2,s-=this.game.tileSize):i===e.Direction.Right?(this.rot=Math.PI/2,s+=this.game.tileSize):i===e.Direction.Down?(this.rot=Math.PI,a+=this.game.tileSize):i===e.Direction.Up&&(this.rot=0,a-=this.game.tileSize);var o={x:s,y:a};n.canThingMoveToPosition(this,o,this.game.currentLevel)&&this.configureWalkingAnimation(o)}},i.prototype.configureWalkingAnimation=function(i){this.animations.walking.startTime=this.game.timestamp,this.animations.walking.endPos=i,this.animations.walking.running=!0},i.prototype.updateWalkingPosition=function(i){if(this.walking){var t=(i-this.animations.walking.startTime)/this.animations.walking.duration;this.pos.x=n.lerp(this.pos.x,this.animations.walking.endPos.x,t),this.pos.y=n.lerp(this.pos.y,this.animations.walking.endPos.y,t),t>=1&&(this.pos.x=this.animations.walking.endPos.x,this.pos.y=this.animations.walking.endPos.y,this.animations.walking.running=!1)}},i.prototype.update=function(i){this.dusts.forEach(function(t){return t.update(i)}),this.drawingSize.width=e.TILE_SIZE*this.game.squareSize,this.drawingSize.height=e.TILE_SIZE*this.game.squareSize},i.prototype.draw=function(i,t){if(this.updateWalkingPosition(t),i.translate(this.drawingSize.width/2,this.drawingSize.height/2),i.rotate(this.rot),i.translate(-this.drawingSize.width/2,-this.drawingSize.height/2),i.fillStyle=this.color,i.fillRect(0,0,this.drawingSize.width,this.drawingSize.height),this.maybeDoEyeAnimations(t),this.drawEye(i,"left",this.animations.blinking.openness,this.animations.lookAway.offset),this.drawEye(i,"right",this.animations.blinking.openness,this.animations.lookAway.offset),this.walking){var n=this.dusts.find(function(i){return!i.visible});if(n){var e=this.size.width/2*Math.random()+this.size.width/4,s=this.size.height/2*Math.random()+this.size.height/4,a=this.pos.x+e,o=this.pos.y+s;n.reJuice(t,a,o)}}i.setTransform(1,0,0,1,0,0)},i.prototype.resize=function(){},i.prototype.maybeDoEyeAnimations=function(i){var t=this.animations,e=t.blinking,s=t.lookAway;n.shouldDoAnimation(e,i)&&(e.running=!0,e.startTime=i),n.shouldDoAnimation(s,i)&&(s.running=!0,s.startTime=i),this.runBlinkingAnimation(e,i),this.runLookAwayAnimation(s)},i.prototype.runLookAwayAnimation=function(i){i.running&&(i.offset=0===i.offset?1:0,i.running=!1)},i.prototype.runBlinkingAnimation=function(i,t){var e=(t-i.startTime)/i.duration;i.openness=n.twoPhaseClerp(e,0,1,!0),e>=1&&(i.running=!1)},i.prototype.drawEye=function(i,t,n,e){var s="left"===t?0:g*this.game.squareSize;i.fillStyle=h;var u=l*this.game.squareSize,m=a*this.game.squareSize,d=o*this.game.squareSize;i.fillRect(u+s,u,m,m*n),i.fillStyle=r,i.fillRect(u+s+e*this.game.squareSize,u,d,d*n)},i}();exports.default=d;
},{"./dust":"UQVz","./helpers":"eAYL","./common":"5ywg","./animations":"oinf"}],"dgAm":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};exports.__esModule=!0;var e=require("./common"),i=require("./animations"),a=require("./helpers"),r=t(require("./levels/start-screen")),n=t(require("./levels/world")),s=t(require("./player")),o=e.SQUARE_SIZE,h=10*e.SQUARE_SIZE,l=3,c=function(){function t(t){this.timestamp=0,this.tileSize=e.TILE_SIZE,this.squareSize=e.SQUARE_SIZE,this.nextLevel=null,this.player=new s.default(this),this.canvas=t,this.context=t.getContext("2d"),this.context.mozImageSmoothingEnabled=!1,this.context.webkitImageSmoothingEnabled=!1,this.context.msImageSmoothingEnabled=!1,this.context.imageSmoothingEnabled=!1,this.levels={startScreen:new r.default(this),world:new n.default(this)},this.transition=Object.assign({},i.transition),this.switchLevel(this.levels.world)}return Object.defineProperty(t.prototype,"transitioning",{get:function(){return this.transition.running},enumerable:!0,configurable:!0}),t.prototype.update=function(t){this.player.update(t),this.drawables.forEach(function(e){e.forEach(function(e){e.update(t)})}),this.overlayDrawables.forEach(function(e){return e.update(t)}),this.transitioning&&this.updateTransition(t)},t.prototype.draw=function(t){this.context&&this.camera&&(this.camera.updateScreenShake(t),this.clearCanvasContext(),this.drawDrawables(t),this.transitioning||this.drawOverlayDrawables(t))},t.prototype.resize=function(){this.currentLevel.resize(),this.drawables.forEach(function(t){t.forEach(function(t){t.resize()})}),this.overlayDrawables.forEach(function(t){return t.resize()})},t.prototype.walk=function(t){this.player.walk(t)},t.prototype.addDrawables=function(t,e){var i;(i=this.drawables[e]).push.apply(i,t)},t.prototype.addOverlayDrawables=function(t){var e;(e=this.overlayDrawables).push.apply(e,t)},t.prototype.clearDrawables=function(){this.drawables=new Array(l).fill([])},t.prototype.clearOverlayDrawables=function(){this.overlayDrawables=[]},t.prototype.queueNextLevel=function(t){this.nextLevel=t,this.startTransition()},t.prototype.handleInput=function(t){this.currentLevel.handleInput(t)},t.prototype.startTransition=function(){this.transition.startTime=this.timestamp,this.transition.running=!0},t.prototype.updateTransition=function(t){var i=(t-this.transition.startTime)/this.transition.duration;i>=.5&&this.switchLevel(this.nextLevel),i>=1&&(this.transition.running=!1),this.squareSize=a.twoPhaseClerp(i,o,h),this.context.globalAlpha=Math.min(e.SQUARE_SIZE/this.squareSize,1)},t.prototype.switchLevel=function(t){this.currentLevel=t,this.clearDrawables(),this.clearOverlayDrawables(),t.configureDrawables()},t.prototype.drawDrawables=function(t){var e=this,i=this.camera.offset;this.drawables.forEach(function(a){a.forEach(function(a){if(a.visible){var r=a.pos.x*e.squareSize+i.x,n=a.pos.y*e.squareSize+i.y;e.isOffScreen(r,n,a.drawingSize)||(e.context.translate(r+.5|0,n+.5|0),a.draw(e.context,t),e.context.setTransform(1,0,0,1,0,0))}})})},t.prototype.isOffScreen=function(t,e,i){return t+i.width<0||t>this.canvas.width||e+i.height<0||e>this.canvas.height},t.prototype.drawOverlayDrawables=function(t){var e=this;this.overlayDrawables.forEach(function(i){i.visible&&i.draw(e.context,t)})},t.prototype.clearCanvasContext=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t}();exports.default=c;
},{"./common":"5ywg","./animations":"oinf","./helpers":"eAYL","./levels/start-screen":"Wql6","./levels/world":"GyKP","./player":"2rXh"}],"Qu5t":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var r=require("./common"),e=10*r.MS_PER_UPDATE;function t(r,t,o){var n=0,u=0;return function(a){for(n+=Math.min(a-u,e),u=a;n>=r;)t.call(o,a),n-=r}}exports.default=t;
},{"./common":"5ywg"}],"9B6d":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};exports.__esModule=!0;var n=e(require("./camera")),t=e(require("./game")),i=e(require("./game-loop")),r=require("./common"),o=i.default(r.MS_PER_UPDATE,f,this),d=document.getElementById("game"),u=new t.default(d),a=new n.default(u),s=128*r.SQUARE_SIZE,w=s,h=s,c=null,l=!1;u.camera=a;var m={s:a.shakeScreen.bind(a),t:function(){return u.queueNextLevel(u.levels.world)}};function v(){var e=window.innerWidth/window.innerHeight;e>=1?h=(w=s)/e:w=(h=s)*e,d.width=w,d.height=h,a.size={width:d.width,height:d.height},u.resize()}function f(e){u.update(e),a.move(u.player)}function p(e){u.timestamp=e,c&&l&&_(c),o(e),u.draw(e),requestAnimationFrame(p)}function E(e){L(e),l=!0}function L(e){var n=e;e.touches&&(n=e.changedTouches[0]),c=n}function g(){c=null,l=!1}function _(e){var n=a.offset,t=e.clientX*w/window.innerWidth-n.x,i=e.clientY*h/window.innerHeight-n.y,o=t-u.player.pos.x*u.squareSize,d=i-u.player.pos.y*u.squareSize,s=Math.abs(o),c=Math.abs(d),l=u.squareSize*r.HALF_TILE_SIZE;s<l&&c<l||(s>c?o>0?u.handleInput("ArrowRight"):u.handleInput("ArrowLeft"):d>0?u.handleInput("ArrowDown"):u.handleInput("ArrowUp"))}v(),requestAnimationFrame(p),window.addEventListener("resize",function(){return v()}),window.addEventListener("keydown",function(e){var n=e.key;m[n]?m[n]():u.handleInput(n)}),window.addEventListener("mousedown",E,!1),window.addEventListener("touchstart",E,!1),window.addEventListener("mouseup",g,!1),window.addEventListener("touchend",g,!1),window.addEventListener("mousemove",L,!1),window.addEventListener("touchmove",L,!1),document.body.addEventListener("touchmove",function(e){return e.preventDefault()},{passive:!1});
},{"./camera":"LnVe","./game":"dgAm","./game-loop":"Qu5t","./common":"5ywg"}]},{},["9B6d"], null)</script> </body> </html>